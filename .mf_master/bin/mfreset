#!/usr/bin/env bash
set -euo pipefail
ROOT="$(cd "$(dirname "${BASH_SOURCE[0]}")/../.." && pwd)"
cd "$ROOT"

MODE="${1:-soft}"
if [[ "$MODE" != "soft" && "$MODE" != "hard" ]]; then
  echo "Uso: ./ .mf_master/bin/mfreset [soft|hard]"
  exit 2
fi

URL="http://localhost:8080/?reset=${MODE}"

echo "============================================================"
echo "ðŸ§¼ mfreset | mode=$MODE"
echo "âž¡ï¸ Abrindo: $URL"
echo "============================================================"
echo "Obs: o reset roda no app via src/lib/resetApp.ts + src/lib/mfreset.ts"
echo

# macOS
if command -v open >/dev/null 2>&1; then
  open "$URL" || true
else
  echo "Abra manualmente no browser: $URL"
fi

echo "âœ… Disparado. Se quiser validar: faÃ§a refresh e veja se onboarding voltou para step-1."
