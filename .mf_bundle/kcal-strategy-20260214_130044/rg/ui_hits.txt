src/lib/exportar-pdf.ts:89:  doc.text(`Calorias Queimadas: ${caloriasQueimadas} kcal`, 25, yPos)
src/lib/exportar-pdf.ts:124:    doc.text(`Estratégia: ${state.dietaAtiva.estrategia}`, 25, yPos)
src/lib/exportar-pdf.ts:144:    doc.text(`Calorias: ${macros.calorias} kcal/dia`, 30, yPos)
src/lib/exportar-pdf.ts:172:        doc.text(`Total: ${totalCalorias} kcal`, 35, yPos)
src/lib/exportar-pdf.ts:179:          doc.text(`• ${alimento.nome} - ${alimento.gramas}g (${alimento.calorias} kcal)`, 40, yPos)
src/lib/exportar-pdf.ts:206:    doc.text(`Estratégia: ${state.treinoAtivo.estrategia}`, 25, yPos)
src/lib/exportar-pdf.ts:297:      doc.text(`Calorias: ${corrida.calorias} kcal`, 30, yPos)
src/lib/exportar-pdf.ts:390:    const __kcal = (__adapted?.kcalTarget ?? null);
src/lib/exportar-pdf.ts:403:    const __hasKcal = Number(__kcal || 0) > 0;
src/lib/exportar-pdf.ts:405:    // Renderiza se houver evidência real de dieta (kcal+macros ou refeições)
src/lib/exportar-pdf.ts:429:        __docN.text(`Calorias alvo: ${Number(__kcal).toFixed(0)} kcal`, xN, yN);
src/lib/exportar-pdf.ts:440:        if (cal > 0) { __docN.text(`Calorias: ${cal.toFixed(0)} kcal/dia`, xN, yN); yN += 6; }
src/lib/exportar-pdf.ts:471:            const kcal = (a?.calorias ?? a?.kcal ?? null);
src/lib/exportar-pdf.ts:472:            const kcalTxt = (kcal !== null && kcal !== undefined) ? ` (${String(kcal)} kcal)` : "";
src/lib/exportar-pdf.ts:473:            const line = `• ${an}${unit ? " - " + unit : ""}${kcalTxt}`;
src/components/analytics/StatsOverview.tsx:71:            <div className="text-white font-semibold text-lg">{formatK(summary.totalCaloriesKcal)} kcal</div>
src/types/index.ts:9:export type EstrategiaNutricional = 'deficit-leve' | 'deficit-moderado' | 'deficit-agressivo' | 'manutencao' | 'superavit'
src/types/index.ts:94:  caloriasAlvo: number
src/types/index.ts:155:  kcalAlvo?: number;
src/services/nutrition/nutrition.adapter.ts:33:  kcalTarget: number | null;
src/services/nutrition/nutrition.adapter.ts:58: * Esperado: Meal = { name, time, items:[{ name, grams, kcal, proteinG, carbsG, fatG, substitutions? }] }
src/services/nutrition/nutrition.adapter.ts:82:        calorias: n(it?.kcal ?? it?.calorias ?? it?.cal ?? 0),
src/services/nutrition/nutrition.adapter.ts:103:export function adaptMacrosToPtBR(macros: any, kcalFallback = 0): MfMacros {
src/services/nutrition/nutrition.adapter.ts:105:    n(macros?.calorias ?? macros?.kcal ?? macros?.kcalTarget ?? macros?.calories ?? kcalFallback, kcalFallback);
src/services/nutrition/nutrition.adapter.ts:116: * + pass-through seguro de kcalTarget e meals (para DashboardPremium/PlanosAtivos/Report).
src/services/nutrition/nutrition.adapter.ts:131:  const kcalTargetNum = n(
src/services/nutrition/nutrition.adapter.ts:132:    nutrition?.kcalTarget ??
src/services/nutrition/nutrition.adapter.ts:134:      nutrition?.caloriasAlvo ??
src/services/nutrition/nutrition.adapter.ts:135:      nutrition?.kcal ??
src/services/nutrition/nutrition.adapter.ts:140:  const kcalTarget = kcalTargetNum > 0 ? kcalTargetNum : null;
src/services/nutrition/nutrition.adapter.ts:142:  const macros = adaptMacrosToPtBR(nutrition?.macros ?? nutrition, kcalTargetNum);
src/services/nutrition/nutrition.adapter.ts:144:  return { macros, refeicoes, kcalTarget, meals: mealsArr };
src/components/analytics/analytics-utils.ts:51:  const kcal = toNum(w?.caloriesKcal);
src/components/analytics/analytics-utils.ts:52:  if (kcal != null) return Math.max(0, kcal);
src/services/nutrition/engine/nutritionEngine.ts:28:  // para precisão: permite override do déficit/superávit (kcal)
src/services/nutrition/engine/nutritionEngine.ts:33:  kcal: number;
src/services/nutrition/engine/nutritionEngine.ts:41:  ree_kcal: number;
src/services/nutrition/engine/nutritionEngine.ts:42:  tdee_kcal: number;
src/services/nutrition/engine/nutritionEngine.ts:43:  alvo_kcal: number;
src/services/nutrition/engine/nutritionEngine.ts:46:  delta_objetivo_kcal: number;
src/services/nutrition/engine/nutritionEngine.ts:74:  // Mifflin-St Jeor (kcal/d)
src/services/nutrition/engine/nutritionEngine.ts:79:  // Cunningham (kcal/d)
src/services/nutrition/engine/nutritionEngine.ts:123:  // usamos % kcal + ajuste heurístico por biotipo.
src/services/nutrition/engine/nutritionEngine.ts:124:  // Base: 25% kcal; Endo: 28%; Ecto: 22%; Meso: 25%
src/services/nutrition/engine/nutritionEngine.ts:139:  const kcalRest = alvoKcal - (proteinG * 4) - (fatG * 9);
src/services/nutrition/engine/nutritionEngine.ts:140:  const baseCarb = Math.max(0, kcalRest) / 4;
src/services/nutrition/engine/nutritionEngine.ts:153:  // regra simples: 14g/1000 kcal, com teto/piso razoáveis
src/services/nutrition/engine/nutritionEngine.ts:170:  if (opts.deltaKcalOverride != null) notas.push("Delta kcal override aplicado.");
src/services/nutrition/engine/nutritionEngine.ts:176:  // Re-normaliza carbo para fechar kcal exatamente
src/services/nutrition/engine/nutritionEngine.ts:177:  const kcal = alvo;
src/services/nutrition/engine/nutritionEngine.ts:180:  const kcalFixed = (p * 4) + (f * 9);
src/services/nutrition/engine/nutritionEngine.ts:181:  const c = Math.max(0, (kcal - kcalFixed) / 4);
src/services/nutrition/engine/nutritionEngine.ts:184:  const fib = fiberTargetG(kcal);
src/services/nutrition/engine/nutritionEngine.ts:192:    ree_kcal: round(ree),
src/services/nutrition/engine/nutritionEngine.ts:193:    tdee_kcal: round(tdee),
src/services/nutrition/engine/nutritionEngine.ts:194:    alvo_kcal: round(kcal),
src/services/nutrition/engine/nutritionEngine.ts:197:    delta_objetivo_kcal: round(delta),
src/services/nutrition/engine/nutritionEngine.ts:199:      kcal: round(kcal),
src/services/nutrition/engine/nutritionEngine.demo.ts:9:    ree: plan.ree_kcal,
src/services/nutrition/engine/nutritionEngine.demo.ts:10:    tdee: plan.tdee_kcal,
src/services/nutrition/engine/nutritionEngine.demo.ts:11:    alvo: plan.alvo_kcal,
src/services/nutrition/engine/nutritionEngine.demo.ts:14:    delta: plan.delta_objetivo_kcal,
src/pages/EditDiet.tsx:286:              <p className="text-xs text-gray-400">{totalCalorias.toFixed(0)} kcal totais</p>
src/pages/EditDiet.tsx:329:                        <p className="text-xs text-gray-500">{alimento.gramas}g • {alimento.calorias.toFixed(0)} kcal</p>
src/pages/EditDiet.tsx:360:                                          {gramasAjustadas}g • {(substituto.calorias * fator).toFixed(0)} kcal
src/components/treino/WeeklyProtocolActive.tsx:150:      {/* Estratégia por modalidade (sempre para todas as selecionadas) */}
src/components/treino/WeeklyProtocolActive.tsx:153:          <div className="text-sm font-semibold">Estratégia por modalidade</div>
src/components/treino/WeeklyProtocolActive.tsx:170:                      <span className="text-muted-foreground">Estratégia:</span>{" "}
src/utils/geradorDieta.ts:7:  caloriasAlvo: number
src/utils/geradorDieta.ts:45:  let calorias = dados.caloriasAlvo
src/utils/geradorDieta.ts:46:  if (dados.estrategia === 'deficit-leve') calorias = dados.caloriasAlvo * 0.9
src/utils/geradorDieta.ts:47:  if (dados.estrategia === 'deficit-moderado') calorias = dados.caloriasAlvo * 0.8
src/utils/geradorDieta.ts:48:  if (dados.estrategia === 'deficit-agressivo') calorias = dados.caloriasAlvo * 0.75
src/utils/geradorDieta.ts:49:  if (dados.estrategia === 'superavit') calorias = dados.caloriasAlvo * 1.15
src/pages/PlanosAtivos.tsx:45:  const kcal = activePlan?.nutrition?.kcalTarget ?? activePlan?.nutrition?.kcal ?? null;
src/pages/PlanosAtivos.tsx:234:                  <div className="text-xs text-white/60">Calorias alvo</div>
src/pages/PlanosAtivos.tsx:235:                  <div className="mt-1 text-xl font-semibold">{kcal ? `${kcal} kcal/dia` : "—"}</div>
src/data/alimentos-taco-completo.ts:19:  energia_kcal: number | 'NA'
src/data/alimentos-taco-completo.ts:30:  { id: 'arroz_integral_cozido', codigo: 1, nome: 'Arroz, integral, cozido', categoria: 'Cereais e derivados', energia_kcal: 124, proteina_g: 2.6, lipideos_g: 1.0, colesterol_mg: 'NA', carboidrato_g: 25.8, fibra_g: 2.7, grupoSubstituicao: 'carboidrato_integral' },
src/data/alimentos-taco-completo.ts:31:  { id: 'arroz_integral_cru', codigo: 2, nome: 'Arroz, integral, cru', categoria: 'Cereais e derivados', energia_kcal: 360, proteina_g: 7.3, lipideos_g: 1.9, colesterol_mg: 'NA', carboidrato_g: 77.5, fibra_g: 4.8, grupoSubstituicao: 'carboidrato_integral' },
src/data/alimentos-taco-completo.ts:32:  { id: 'arroz_tipo1_cozido', codigo: 3, nome: 'Arroz, tipo 1, cozido', categoria: 'Cereais e derivados', energia_kcal: 128, proteina_g: 2.5, lipideos_g: 0.2, colesterol_mg: 'NA', carboidrato_g: 28.1, fibra_g: 1.6, grupoSubstituicao: 'carboidrato_refinado' },
src/data/alimentos-taco-completo.ts:33:  { id: 'arroz_tipo1_cru', codigo: 4, nome: 'Arroz, tipo 1, cru', categoria: 'Cereais e derivados', energia_kcal: 358, proteina_g: 7.2, lipideos_g: 0.3, colesterol_mg: 'NA', carboidrato_g: 78.8, fibra_g: 1.6, grupoSubstituicao: 'carboidrato_refinado' },
src/data/alimentos-taco-completo.ts:34:  { id: 'arroz_tipo2_cozido', codigo: 5, nome: 'Arroz, tipo 2, cozido', categoria: 'Cereais e derivados', energia_kcal: 130, proteina_g: 2.6, lipideos_g: 0.4, colesterol_mg: 'NA', carboidrato_g: 28.2, fibra_g: 1.1, grupoSubstituicao: 'carboidrato_refinado' },
src/data/alimentos-taco-completo.ts:35:  { id: 'arroz_tipo2_cru', codigo: 6, nome: 'Arroz, tipo 2, cru', categoria: 'Cereais e derivados', energia_kcal: 358, proteina_g: 7.2, lipideos_g: 0.3, colesterol_mg: 'NA', carboidrato_g: 78.9, fibra_g: 1.7, grupoSubstituicao: 'carboidrato_refinado' },
src/data/alimentos-taco-completo.ts:36:  { id: 'aveia_flocos_crua', codigo: 7, nome: 'Aveia, flocos, crua', categoria: 'Cereais e derivados', energia_kcal: 394, proteina_g: 13.9, lipideos_g: 8.5, colesterol_mg: 'NA', carboidrato_g: 66.6, fibra_g: 9.1, grupoSubstituicao: 'cereal_integral' },
src/data/alimentos-taco-completo.ts:37:  { id: 'macarrao_trigo_cru', codigo: 40, nome: 'Macarrão, trigo, cru', categoria: 'Cereais e derivados', energia_kcal: 371, proteina_g: 10.0, lipideos_g: 1.3, colesterol_mg: 'NA', carboidrato_g: 77.9, fibra_g: 2.9, grupoSubstituicao: 'massa' },
src/data/alimentos-taco-completo.ts:38:  { id: 'macarrao_trigo_ovos_cru', codigo: 41, nome: 'Macarrão, trigo, cru, com ovos', categoria: 'Cereais e derivados', energia_kcal: 371, proteina_g: 10.3, lipideos_g: 2.0, colesterol_mg: 18, carboidrato_g: 76.6, fibra_g: 2.3, grupoSubstituicao: 'massa' },
src/data/alimentos-taco-completo.ts:39:  { id: 'pao_integral_forma', codigo: 52, nome: 'Pão, trigo, forma, integral', categoria: 'Cereais e derivados', energia_kcal: 253, proteina_g: 9.4, lipideos_g: 3.7, colesterol_mg: 'NA', carboidrato_g: 49.9, fibra_g: 6.9, grupoSubstituicao: 'pao_integral' },
src/data/alimentos-taco-completo.ts:40:  { id: 'pao_frances', codigo: 53, nome: 'Pão, trigo, francês', categoria: 'Cereais e derivados', energia_kcal: 300, proteina_g: 8.0, lipideos_g: 3.1, colesterol_mg: 'NA', carboidrato_g: 58.6, fibra_g: 2.3, grupoSubstituicao: 'pao_refinado' },
src/data/alimentos-taco-completo.ts:43:  { id: 'abobora_cabotian_cozida', codigo: 64, nome: 'Abóbora, cabotian, cozida', categoria: 'Verduras, hortaliças e derivados', energia_kcal: 48, proteina_g: 1.4, lipideos_g: 0.7, colesterol_mg: 'NA', carboidrato_g: 10.8, fibra_g: 2.5, grupoSubstituicao: 'vegetal_cozido' },
src/data/alimentos-taco-completo.ts:44:  { id: 'abobora_cabotian_crua', codigo: 65, nome: 'Abóbora, cabotian, crua', categoria: 'Verduras, hortaliças e derivados', energia_kcal: 39, proteina_g: 1.7, lipideos_g: 0.5, colesterol_mg: 'NA', carboidrato_g: 8.4, fibra_g: 2.2, grupoSubstituicao: 'vegetal_cru' },
src/data/alimentos-taco-completo.ts:45:  { id: 'abobrinha_italiana_cozida', codigo: 70, nome: 'Abobrinha, italiana, cozida', categoria: 'Verduras, hortaliças e derivados', energia_kcal: 15, proteina_g: 1.1, lipideos_g: 0.2, colesterol_mg: 'NA', carboidrato_g: 3.0, fibra_g: 1.6, grupoSubstituicao: 'vegetal_baixo_carb' },
src/data/alimentos-taco-completo.ts:46:  { id: 'abobrinha_italiana_crua', codigo: 71, nome: 'Abobrinha, italiana, crua', categoria: 'Verduras, hortaliças e derivados', energia_kcal: 19, proteina_g: 1.1, lipideos_g: 0.1, colesterol_mg: 'NA', carboidrato_g: 4.3, fibra_g: 1.4, grupoSubstituicao: 'vegetal_baixo_carb' },
src/data/alimentos-taco-completo.ts:47:  { id: 'alface_americana_crua', codigo: 77, nome: 'Alface, americana, crua', categoria: 'Verduras, hortaliças e derivados', energia_kcal: 9, proteina_g: 0.6, lipideos_g: 0.1, colesterol_mg: 'NA', carboidrato_g: 1.7, fibra_g: 1.0, grupoSubstituicao: 'folha_verde' },
src/data/alimentos-taco-completo.ts:48:  { id: 'alface_crespa_crua', codigo: 78, nome: 'Alface, crespa, crua', categoria: 'Verduras, hortaliças e derivados', energia_kcal: 11, proteina_g: 1.3, lipideos_g: 0.2, colesterol_mg: 'NA', carboidrato_g: 1.7, fibra_g: 1.8, grupoSubstituicao: 'folha_verde' },
src/data/alimentos-taco-completo.ts:49:  { id: 'alface_roxa_crua', codigo: 80, nome: 'Alface, roxa, crua', categoria: 'Verduras, hortaliças e derivados', energia_kcal: 13, proteina_g: 0.9, lipideos_g: 0.2, colesterol_mg: 'NA', carboidrato_g: 2.5, fibra_g: 2.0, grupoSubstituicao: 'folha_verde' },
src/data/alimentos-taco-completo.ts:50:  { id: 'brocolis_cozido', codigo: 100, nome: 'Brócolis, cozido', categoria: 'Verduras, hortaliças e derivados', energia_kcal: 25, proteina_g: 2.1, lipideos_g: 0.5, colesterol_mg: 'NA', carboidrato_g: 4.4, fibra_g: 3.4, grupoSubstituicao: 'vegetal_crucifero' },
src/data/alimentos-taco-completo.ts:51:  { id: 'brocolis_cru', codigo: 101, nome: 'Brócolis, cru', categoria: 'Verduras, hortaliças e derivados', energia_kcal: 25, proteina_g: 3.6, lipideos_g: 0.3, colesterol_mg: 'NA', carboidrato_g: 4.0, fibra_g: 2.9, grupoSubstituicao: 'vegetal_crucifero' },
src/data/alimentos-taco-completo.ts:52:  { id: 'batata_doce_cozida', codigo: 88, nome: 'Batata, doce, cozida', categoria: 'Verduras, hortaliças e derivados', energia_kcal: 77, proteina_g: 0.6, lipideos_g: 0.1, colesterol_mg: 'NA', carboidrato_g: 18.4, fibra_g: 2.2, grupoSubstituicao: 'tuberculo' },
src/data/alimentos-taco-completo.ts:53:  { id: 'batata_doce_crua', codigo: 89, nome: 'Batata, doce, crua', categoria: 'Verduras, hortaliças e derivados', energia_kcal: 118, proteina_g: 1.3, lipideos_g: 0.1, colesterol_mg: 'NA', carboidrato_g: 28.2, fibra_g: 2.6, grupoSubstituicao: 'tuberculo' },
src/data/alimentos-taco-completo.ts:54:  { id: 'batata_inglesa_cozida', codigo: 91, nome: 'Batata, inglesa, cozida', categoria: 'Verduras, hortaliças e derivados', energia_kcal: 52, proteina_g: 1.2, lipideos_g: 'Tr', colesterol_mg: 'NA', carboidrato_g: 11.9, fibra_g: 1.3, grupoSubstituicao: 'tuberculo' },
src/data/alimentos-taco-completo.ts:55:  { id: 'batata_inglesa_crua', codigo: 92, nome: 'Batata, inglesa, crua', categoria: 'Verduras, hortaliças e derivados', energia_kcal: 64, proteina_g: 1.8, lipideos_g: 'Tr', colesterol_mg: 'NA', carboidrato_g: 14.7, fibra_g: 1.2, grupoSubstituicao: 'tuberculo' },
src/data/alimentos-taco-completo.ts:56:  { id: 'berinjela_cozida', codigo: 95, nome: 'Berinjela, cozida', categoria: 'Verduras, hortaliças e derivados', energia_kcal: 19, proteina_g: 0.7, lipideos_g: 0.1, colesterol_mg: 'NA', carboidrato_g: 4.5, fibra_g: 2.5, grupoSubstituicao: 'vegetal_baixo_carb' },
src/data/alimentos-taco-completo.ts:57:  { id: 'cenoura_cozida', codigo: 109, nome: 'Cenoura, cozida', categoria: 'Verduras, hortaliças e derivados', energia_kcal: 30, proteina_g: 0.8, lipideos_g: 0.2, colesterol_mg: 'NA', carboidrato_g: 6.7, fibra_g: 2.6, grupoSubstituicao: 'vegetal_raiz' },
src/data/alimentos-taco-completo.ts:58:  { id: 'cenoura_crua', codigo: 110, nome: 'Cenoura, crua', categoria: 'Verduras, hortaliças e derivados', energia_kcal: 34, proteina_g: 1.3, lipideos_g: 0.2, colesterol_mg: 'NA', carboidrato_g: 7.7, fibra_g: 3.2, grupoSubstituicao: 'vegetal_raiz' },
src/data/alimentos-taco-completo.ts:59:  { id: 'chuchu_cozido', codigo: 112, nome: 'Chuchu, cozido', categoria: 'Verduras, hortaliças e derivados', energia_kcal: 19, proteina_g: 0.4, lipideos_g: 'Tr', colesterol_mg: 'NA', carboidrato_g: 4.8, fibra_g: 1.0, grupoSubstituicao: 'vegetal_baixo_carb' },
src/data/alimentos-taco-completo.ts:60:  { id: 'couve_flor_cozida', codigo: 118, nome: 'Couve-flor, cozida', categoria: 'Verduras, hortaliças e derivados', energia_kcal: 19, proteina_g: 1.2, lipideos_g: 0.3, colesterol_mg: 'NA', carboidrato_g: 3.9, fibra_g: 2.1, grupoSubstituicao: 'vegetal_crucifero' },
src/data/alimentos-taco-completo.ts:61:  { id: 'espinafre_nova_zelandia_cru', codigo: 119, nome: 'Espinafre, Nova Zelândia, cru', categoria: 'Verduras, hortaliças e derivados', energia_kcal: 16, proteina_g: 2.0, lipideos_g: 0.2, colesterol_mg: 'NA', carboidrato_g: 2.6, fibra_g: 2.1, grupoSubstituicao: 'folha_verde_escura' },
src/data/alimentos-taco-completo.ts:62:  { id: 'mandioca_cozida', codigo: 129, nome: 'Mandioca, cozida', categoria: 'Verduras, hortaliças e derivados', energia_kcal: 125, proteina_g: 0.6, lipideos_g: 0.3, colesterol_mg: 'NA', carboidrato_g: 30.1, fibra_g: 1.6, grupoSubstituicao: 'tuberculo' },
src/data/alimentos-taco-completo.ts:63:  { id: 'tomate_com_semente_cru', codigo: 157, nome: 'Tomate, com semente, cru', categoria: 'Verduras, hortaliças e derivados', energia_kcal: 15, proteina_g: 1.1, lipideos_g: 0.2, colesterol_mg: 'NA', carboidrato_g: 3.1, fibra_g: 1.2, grupoSubstituicao: 'vegetal_fruto' },
src/data/alimentos-taco-completo.ts:66:  { id: 'abacate_cru', codigo: 163, nome: 'Abacate, cru', categoria: 'Frutas e derivados', energia_kcal: 96, proteina_g: 1.2, lipideos_g: 8.4, colesterol_mg: 'NA', carboidrato_g: 6.0, fibra_g: 6.3, grupoSubstituicao: 'fruta_gordura' },
src/data/alimentos-taco-completo.ts:67:  { id: 'abacaxi_cru', codigo: 164, nome: 'Abacaxi, cru', categoria: 'Frutas e derivados', energia_kcal: 48, proteina_g: 0.9, lipideos_g: 0.1, colesterol_mg: 'NA', carboidrato_g: 12.3, fibra_g: 1.0, grupoSubstituicao: 'fruta_tropical' },
src/data/alimentos-taco-completo.ts:68:  { id: 'banana_nanica_crua', codigo: 179, nome: 'Banana, nanica, crua', categoria: 'Frutas e derivados', energia_kcal: 92, proteina_g: 1.4, lipideos_g: 0.1, colesterol_mg: 'NA', carboidrato_g: 23.8, fibra_g: 1.9, grupoSubstituicao: 'fruta_energetica' },
src/data/alimentos-taco-completo.ts:69:  { id: 'banana_prata_crua', codigo: 182, nome: 'Banana, prata, crua', categoria: 'Frutas e derivados', energia_kcal: 98, proteina_g: 1.3, lipideos_g: 0.1, colesterol_mg: 'NA', carboidrato_g: 26.0, fibra_g: 2.0, grupoSubstituicao: 'fruta_energetica' },
src/data/alimentos-taco-completo.ts:70:  { id: 'laranja_baia_crua', codigo: 208, nome: 'Laranja, baía, crua', categoria: 'Frutas e derivados', energia_kcal: 45, proteina_g: 1.0, lipideos_g: 0.1, colesterol_mg: 'NA', carboidrato_g: 11.5, fibra_g: 1.1, grupoSubstituicao: 'fruta_citrica' },
src/data/alimentos-taco-completo.ts:71:  { id: 'maca_fuji_com_casca', codigo: 222, nome: 'Maçã, Fuji, com casca, crua', categoria: 'Frutas e derivados', energia_kcal: 56, proteina_g: 0.3, lipideos_g: 'Tr', colesterol_mg: 'NA', carboidrato_g: 15.2, fibra_g: 1.3, grupoSubstituicao: 'fruta_temperada' },
src/data/alimentos-taco-completo.ts:72:  { id: 'mamao_papaia_cru', codigo: 226, nome: 'Mamão, Papaia, cru', categoria: 'Frutas e derivados', energia_kcal: 40, proteina_g: 0.5, lipideos_g: 0.1, colesterol_mg: 'NA', carboidrato_g: 10.4, fibra_g: 1.0, grupoSubstituicao: 'fruta_tropical' },
src/data/alimentos-taco-completo.ts:73:  { id: 'melancia_crua', codigo: 235, nome: 'Melancia, crua', categoria: 'Frutas e derivados', energia_kcal: 33, proteina_g: 0.9, lipideos_g: 'Tr', colesterol_mg: 'NA', carboidrato_g: 8.1, fibra_g: 0.1, grupoSubstituicao: 'fruta_baixo_cal' },
src/data/alimentos-taco-completo.ts:74:  { id: 'morango_cru', codigo: 239, nome: 'Morango, cru', categoria: 'Frutas e derivados', energia_kcal: 30, proteina_g: 0.9, lipideos_g: 0.3, colesterol_mg: 'NA', carboidrato_g: 6.8, fibra_g: 1.7, grupoSubstituicao: 'fruta_vermelha' },
src/data/alimentos-taco-completo.ts:77:  { id: 'frango_peito_sem_pele_cozido', codigo: 408, nome: 'Frango, peito, sem pele, cozido', categoria: 'Carnes e derivados', energia_kcal: 163, proteina_g: 31.5, lipideos_g: 3.2, colesterol_mg: 89, carboidrato_g: 0.0, fibra_g: 'NA', grupoSubstituicao: 'proteina_magra' },
src/data/alimentos-taco-completo.ts:78:  { id: 'frango_peito_sem_pele_cru', codigo: 409, nome: 'Frango, peito, sem pele, cru', categoria: 'Carnes e derivados', energia_kcal: 119, proteina_g: 21.5, lipideos_g: 3.0, colesterol_mg: 59, carboidrato_g: 0.0, fibra_g: 'NA', grupoSubstituicao: 'proteina_magra' },
src/data/alimentos-taco-completo.ts:79:  { id: 'frango_peito_sem_pele_grelhado', codigo: 410, nome: 'Frango, peito, sem pele, grelhado', categoria: 'Carnes e derivados', energia_kcal: 159, proteina_g: 32.0, lipideos_g: 2.5, colesterol_mg: 89, carboidrato_g: 0.0, fibra_g: 'NA', grupoSubstituicao: 'proteina_magra' },
src/data/alimentos-taco-completo.ts:80:  { id: 'frango_coxa_sem_pele_cozida', codigo: 398, nome: 'Frango, coxa, sem pele, cozida', categoria: 'Carnes e derivados', energia_kcal: 167, proteina_g: 26.9, lipideos_g: 5.8, colesterol_mg: 133, carboidrato_g: 0.0, fibra_g: 'NA', grupoSubstituicao: 'proteina_moderada' },
src/data/alimentos-taco-completo.ts:81:  { id: 'carne_bovina_patinho_cru', codigo: 376, nome: 'Carne, bovina, patinho, sem gordura, cru', categoria: 'Carnes e derivados', energia_kcal: 133, proteina_g: 21.7, lipideos_g: 4.5, colesterol_mg: 56, carboidrato_g: 0.0, fibra_g: 'NA', grupoSubstituicao: 'carne_vermelha_magra' },
src/data/alimentos-taco-completo.ts:82:  { id: 'carne_bovina_patinho_grelhado', codigo: 377, nome: 'Carne, bovina, patinho, sem gordura, grelhado', categoria: 'Carnes e derivados', energia_kcal: 219, proteina_g: 35.9, lipideos_g: 7.3, colesterol_mg: 126, carboidrato_g: 0.0, fibra_g: 'NA', grupoSubstituicao: 'carne_vermelha_magra' },
src/data/alimentos-taco-completo.ts:83:  { id: 'carne_bovina_alcatra_cru', codigo: 369, nome: 'Carne, bovina, miolo de alcatra, sem gordura, cru', categoria: 'Carnes e derivados', energia_kcal: 163, proteina_g: 21.6, lipideos_g: 7.8, colesterol_mg: 60, carboidrato_g: 0.0, fibra_g: 'NA', grupoSubstituicao: 'carne_vermelha_magra' },
src/data/alimentos-taco-completo.ts:84:  { id: 'carne_bovina_file_mignon_cru', codigo: 357, nome: 'Carne, bovina, filé mingnon, sem gordura, cru', categoria: 'Carnes e derivados', energia_kcal: 143, proteina_g: 21.6, lipideos_g: 5.6, colesterol_mg: 55, carboidrato_g: 0.0, fibra_g: 'NA', grupoSubstituicao: 'carne_vermelha_magra' },
src/data/alimentos-taco-completo.ts:85:  { id: 'peru_congelado_assado', codigo: 425, nome: 'Peru, congelado, assado', categoria: 'Carnes e derivados', energia_kcal: 163, proteina_g: 26.2, lipideos_g: 5.7, colesterol_mg: 91, carboidrato_g: 0.0, fibra_g: 'NA', grupoSubstituicao: 'proteina_magra' },
src/data/alimentos-taco-completo.ts:86:  { id: 'peru_congelado_cru', codigo: 426, nome: 'Peru, congelado, cru', categoria: 'Carnes e derivados', energia_kcal: 94, proteina_g: 18.1, lipideos_g: 1.8, colesterol_mg: 68, carboidrato_g: 0.0, fibra_g: 'NA', grupoSubstituicao: 'proteina_magra' },
src/data/alimentos-taco-completo.ts:89:  { id: 'tilapia_file_cru', codigo: 322, nome: 'Tilápia, filé, congelado, cru', categoria: 'Pescados e frutos do mar', energia_kcal: 88, proteina_g: 18.0, lipideos_g: 1.2, colesterol_mg: 47, carboidrato_g: 0.0, fibra_g: 'NA', grupoSubstituicao: 'peixe_magro' },
src/data/alimentos-taco-completo.ts:90:  { id: 'salmao_sem_pele_cru', codigo: 316, nome: 'Salmão, sem pele, fresco, cru', categoria: 'Pescados e frutos do mar', energia_kcal: 170, proteina_g: 19.3, lipideos_g: 9.7, colesterol_mg: 53, carboidrato_g: 0.0, fibra_g: 'NA', grupoSubstituicao: 'peixe_gorduroso' },
src/data/alimentos-taco-completo.ts:91:  { id: 'salmao_sem_pele_grelhado', codigo: 317, nome: 'Salmão, sem pele, fresco, grelhado', categoria: 'Pescados e frutos do mar', energia_kcal: 243, proteina_g: 26.1, lipideos_g: 14.5, colesterol_mg: 73, carboidrato_g: 0.0, fibra_g: 'NA', grupoSubstituicao: 'peixe_gorduroso' },
src/data/alimentos-taco-completo.ts:92:  { id: 'atum_conserva_oleo', codigo: 277, nome: 'Atum, conserva em óleo', categoria: 'Pescados e frutos do mar', energia_kcal: 166, proteina_g: 26.2, lipideos_g: 6.0, colesterol_mg: 53, carboidrato_g: 0.0, fibra_g: 'NA', grupoSubstituicao: 'peixe_conserva' },
src/data/alimentos-taco-completo.ts:93:  { id: 'atum_fresco_cru', codigo: 278, nome: 'Atum, fresco, cru', categoria: 'Pescados e frutos do mar', energia_kcal: 118, proteina_g: 25.7, lipideos_g: 0.9, colesterol_mg: 48, carboidrato_g: 0.0, fibra_g: 'NA', grupoSubstituicao: 'peixe_magro' },
src/data/alimentos-taco-completo.ts:94:  { id: 'sardinha_conserva_oleo', codigo: 319, nome: 'Sardinha, conserva em óleo', categoria: 'Pescados e frutos do mar', energia_kcal: 285, proteina_g: 15.9, lipideos_g: 24.0, colesterol_mg: 73, carboidrato_g: 0.0, fibra_g: 'NA', grupoSubstituicao: 'peixe_conserva' },
src/data/alimentos-taco-completo.ts:97:  { id: 'ovo_galinha_inteiro_cozido', codigo: 488, nome: 'Ovo, de galinha, inteiro, cozido/10minutos', categoria: 'Ovos e derivados', energia_kcal: 146, proteina_g: 13.3, lipideos_g: 9.5, colesterol_mg: 397, carboidrato_g: 0.6, fibra_g: 'NA', grupoSubstituicao: 'ovo' },
src/data/alimentos-taco-completo.ts:98:  { id: 'ovo_galinha_inteiro_cru', codigo: 489, nome: 'Ovo, de galinha, inteiro, cru', categoria: 'Ovos e derivados', energia_kcal: 143, proteina_g: 13.0, lipideos_g: 8.9, colesterol_mg: 356, carboidrato_g: 1.6, fibra_g: 'NA', grupoSubstituicao: 'ovo' },
src/data/alimentos-taco-completo.ts:99:  { id: 'ovo_galinha_clara_cozida', codigo: 486, nome: 'Ovo, de galinha, clara, cozida/10minutos', categoria: 'Ovos e derivados', energia_kcal: 59, proteina_g: 13.4, lipideos_g: 0.1, colesterol_mg: 'NA', carboidrato_g: 0.0, fibra_g: 'NA', grupoSubstituicao: 'proteina_pura' },
src/data/alimentos-taco-completo.ts:100:  { id: 'ovo_codorna_inteiro_cru', codigo: 485, nome: 'Ovo, de codorna, inteiro, cru', categoria: 'Ovos e derivados', energia_kcal: 177, proteina_g: 13.7, lipideos_g: 12.7, colesterol_mg: 568, carboidrato_g: 0.8, fibra_g: 'NA', grupoSubstituicao: 'ovo' },
src/data/alimentos-taco-completo.ts:103:  { id: 'feijao_carioca_cozido', codigo: 561, nome: 'Feijão, carioca, cozido', categoria: 'Leguminosas e derivados', energia_kcal: 76, proteina_g: 4.8, lipideos_g: 0.5, colesterol_mg: 'NA', carboidrato_g: 13.6, fibra_g: 8.5, grupoSubstituicao: 'leguminosa' },
src/data/alimentos-taco-completo.ts:104:  { id: 'feijao_preto_cozido', codigo: 567, nome: 'Feijão, preto, cozido', categoria: 'Leguminosas e derivados', energia_kcal: 77, proteina_g: 4.5, lipideos_g: 0.5, colesterol_mg: 'NA', carboidrato_g: 14.0, fibra_g: 8.4, grupoSubstituicao: 'leguminosa' },
src/data/alimentos-taco-completo.ts:105:  { id: 'lentilha_cozida', codigo: 577, nome: 'Lentilha, cozida', categoria: 'Leguminosas e derivados', energia_kcal: 93, proteina_g: 6.3, lipideos_g: 0.5, colesterol_mg: 'NA', carboidrato_g: 16.3, fibra_g: 7.9, grupoSubstituicao: 'leguminosa' },
src/data/alimentos-taco-completo.ts:106:  { id: 'grao_bico_cru', codigo: 575, nome: 'Grão-de-bico, cru', categoria: 'Leguminosas e derivados', energia_kcal: 355, proteina_g: 21.2, lipideos_g: 5.4, colesterol_mg: 'NA', carboidrato_g: 57.9, fibra_g: 12.4, grupoSubstituicao: 'leguminosa' },
src/data/alimentos-taco-completo.ts:107:  { id: 'ervilha_em_vagem', codigo: 559, nome: 'Ervilha, em vagem', categoria: 'Leguminosas e derivados', energia_kcal: 88, proteina_g: 7.5, lipideos_g: 0.5, colesterol_mg: 'NA', carboidrato_g: 14.2, fibra_g: 9.7, grupoSubstituicao: 'leguminosa' },
src/data/alimentos-taco-completo.ts:108:  { id: 'amendoim_grao_cru', codigo: 557, nome: 'Amendoim, grão, cru', categoria: 'Leguminosas e derivados', energia_kcal: 544, proteina_g: 27.2, lipideos_g: 43.9, colesterol_mg: 'NA', carboidrato_g: 20.3, fibra_g: 8.0, grupoSubstituicao: 'oleaginosa' },
src/data/alimentos-taco-completo.ts:111:  { id: 'queijo_minas_frescal', codigo: 461, nome: 'Queijo, minas, frescal', categoria: 'Leite e derivados', energia_kcal: 264, proteina_g: 17.4, lipideos_g: 20.2, colesterol_mg: 62, carboidrato_g: 3.2, fibra_g: 'NA', grupoSubstituicao: 'queijo' },
src/data/alimentos-taco-completo.ts:112:  { id: 'queijo_ricota', codigo: 469, nome: 'Queijo, ricota', categoria: 'Leite e derivados', energia_kcal: 140, proteina_g: 12.6, lipideos_g: 8.1, colesterol_mg: 49, carboidrato_g: 3.8, fibra_g: 'NA', grupoSubstituicao: 'queijo_light' },
src/data/alimentos-taco-completo.ts:113:  { id: 'iogurte_natural', codigo: 448, nome: 'Iogurte, natural', categoria: 'Leite e derivados', energia_kcal: 51, proteina_g: 4.1, lipideos_g: 3.0, colesterol_mg: 14, carboidrato_g: 1.9, fibra_g: 'NA', grupoSubstituicao: 'iogurte' },
src/data/alimentos-taco-completo.ts:114:  { id: 'iogurte_natural_desnatado', codigo: 449, nome: 'Iogurte, natural, desnatado', categoria: 'Leite e derivados', energia_kcal: 41, proteina_g: 3.8, lipideos_g: 0.3, colesterol_mg: 3, carboidrato_g: 5.8, fibra_g: 'NA', grupoSubstituicao: 'iogurte_light' },
src/data/alimentos-taco-completo.ts:127:  if (!alimento || alimento.energia_kcal === 'NA') return []
src/data/alimentos-taco-completo.ts:129:  const caloriaAlimento = alimento.energia_kcal as number
src/data/alimentos-taco-completo.ts:135:    if (candidato.energia_kcal === 'NA') return false
src/data/alimentos-taco-completo.ts:137:    const caloriaCandidato = candidato.energia_kcal as number
src/pages/workout-details/WorkoutDetailsPage.tsx:138:              <div className="text-white font-semibold text-lg">{calories != null ? fmt(calories, " kcal") : "—"}</div>
src/services/plan.service.ts:29:  /** Plano alimentar gerado (shape depende do NutritionEngine). */
src/data/alimentos-taco.ts:8:  calorias: number // kcal por 100g
src/data/alimentos-taco.ts:113:// Função para encontrar substitutos equivalentes (mesma categoria e kcal similares)
src/data/alimentos-taco.ts:118:  const caloriasAlvo = alimento.calorias
src/data/alimentos-taco.ts:126:      diferenca: Math.abs(a.calorias - caloriasAlvo),
src/data/alimentos-taco.ts:127:      gramagem: Math.round((caloriasAlvo * 100) / a.calorias) // Gramas necessárias para atingir as mesmas calorias
src/services/ssot/getActivePlanNormalized.ts:53:  const kcal = pickFirst(
src/services/ssot/getActivePlanNormalized.ts:54:    p.kcal,
src/services/ssot/getActivePlanNormalized.ts:55:    nutrition?.kcalTarget,
src/services/ssot/getActivePlanNormalized.ts:56:    nutrition?.kcal,
src/services/ssot/getActivePlanNormalized.ts:57:    macros?.kcal
src/services/ssot/getActivePlanNormalized.ts:73:    kcalTarget: kcal ?? null,
src/services/ssot/getActivePlanNormalized.ts:74:    kcal: kcal ?? null,
src/services/ssot/getActivePlanNormalized.ts:82:    kcal: kcal ?? null,
src/utils/substituicoes.ts:13:  kcal?: number;
src/utils/substituicoes.ts:32:  const kcalBase = num(base.kcal);
src/utils/substituicoes.ts:43:      const dk = Math.abs(num(x.kcal) - kcalBase);
src/services/history/HistoryService.ts:23:  caloriesKcal?: number; // legado wearables (kcal)
src/modules/pdf/PremiumReport.tsx:22:        <h2>Metabolismo & Estratégia</h2>
src/modules/pdf/PremiumReport.tsx:28:        <p>Estratégia aplicada conforme objetivo.</p>
src/pages/NutritionPlan.tsx:92:  const kcalTarget = nutricaoSafe?.macros?.calorias;
src/pages/NutritionPlan.tsx:93:  const science = validateDietScience({ kcalTarget, refeicoes: nutricaoSafe.refeicoes ?? [], tolerancePct: 10 });
src/pages/NutritionPlan.tsx:154:              {nutricaoSafe.refeicoes.length} refeições • {nutricaoSafe.macros.calorias} kcal/dia
src/pages/NutritionPlan.tsx:204:                <p className="text-xs text-gray-500">kcal</p>
src/pages/NutritionPlan.tsx:263:                <p className="text-gray-100 font-semibold">{dayTotals.calorias} kcal</p>
src/pages/NutritionPlan.tsx:304:                        {refeicao.horario} • {totals.calorias} kcal
src/pages/NutritionPlan.tsx:340:                                  {alimento.calorias} kcal
src/pages/NutritionPlan.tsx:400:                                              {macrosSub.calorias} kcal
src/pages/Dashboard.tsx:248:                  {state.nutricao.refeicoes.length} refeições • {state.nutricao.macros.calorias} kcal/dia
src/pages/Report.tsx:194:        if (delta > 25) warn("get_consistencia", "GET parece inconsistente (Δ≈" + String(delta) + " kcal)");
src/pages/Report.tsx:202:    const kcal = Number(dieta?.calorias ?? dieta?.kcal ?? NaN);
src/pages/Report.tsx:207:    if (Number.isFinite(kcal) && Number.isFinite(pG) && Number.isFinite(cG) && Number.isFinite(gG)) {
src/pages/Report.tsx:208:      const kcalFromMacros = Math.round(pG*4 + cG*4 + gG*9);
src/pages/Report.tsx:209:      const delta = Math.abs(kcalFromMacros - kcal);
src/pages/Report.tsx:210:      if (delta > 50) warn("kcal_macros", "Kcal vs macros com diferença (Δ≈" + String(delta) + " kcal)");
src/pages/Report.tsx:211:      else ok("kcal_macros", "Kcal coerente com macros");
src/pages/Report.tsx:213:      warn("kcal_macros", "Não foi possível auditar macros/kcal (dieta parcial)");
src/pages/Report.tsx:250:                  {plan?.metabolic?.tdeeKcal ? `${Math.round(plan.metabolic.tdeeKcal)} kcal/dia` : "—"}
src/pages/Report.tsx:253:                  {plan?.metabolic?.bmrKcal ? `BMR ${Math.round(plan.metabolic.bmrKcal)} kcal` : ""}
src/pages/Report.tsx:260:                  {plan?.macros?.targetKcal ? `${Math.round(plan.macros?.targetKcal)} kcal` : "—"}
src/pages/Report.tsx:442:                  <p className="text-xs text-gray-500">kcal/dia</p>
src/pages/Report.tsx:476:                          {refeicao.alimentos.reduce((acc: number, a: any) => acc + a.calorias, 0).toFixed(0)} kcal
src/pages/Report.tsx:594:                  <p className="text-xs text-gray-500">kcal/dia</p>
src/pages/Report.tsx:599:                  <p className="text-xs text-gray-500">kcal/dia</p>
src/pages/Report.tsx:610:                      <span className="px-2 py-1 rounded bg-white/5 border border-white/10">Mínimo: <b className="text-white">{state.metabolismo.faixaSegura.minimo}</b> kcal</span>
src/pages/Report.tsx:611:                      <span className="px-2 py-1 rounded bg-white/5 border border-white/10">Ideal: <b className="text-white">{state.metabolismo.faixaSegura.ideal}</b> kcal</span>
src/pages/Report.tsx:612:                      <span className="px-2 py-1 rounded bg-white/5 border border-white/10">Máximo: <b className="text-white">{state.metabolismo.faixaSegura.maximo}</b> kcal</span>
src/pages/Report.tsx:618:                          <span className="text-green-400"> • ajuste +{state.metabolismo.ajusteBiotipoKcal} kcal</span>
src/lib/metabolismo.ts:14:kcal: 0, motivo: "Sem ajuste de biotipo." };
src/lib/metabolismo.ts:31:  const kcal = clamp(Math.round(base), 0, 650);
src/lib/metabolismo.ts:35:      ? "Ectomorfo + objetivo de hipertrofia: ajuste fino para melhorar aderência e reduzir risco de déficit involuntário."
src/lib/metabolismo.ts:38:      : "Ectomorfo + emagrecimento: ajuste mínimo para preservar o déficit planejado.";
src/lib/metabolismo.ts:40:  return { kcal, motivo };
src/lib/metabolismo.ts:203:  // Calorias alvo (baseado no objetivo)
src/lib/metabolismo.ts:204:  let caloriasAlvo = get
src/lib/metabolismo.ts:206:    caloriasAlvo = get * 0.85 // déficit de 15%
src/lib/metabolismo.ts:208:    caloriasAlvo = get * 1.1 // superávit de 10%
src/lib/metabolismo.ts:212:    minimo: Math.round(caloriasAlvo * 0.90),
src/lib/metabolismo.ts:213:    ideal: Math.round(caloriasAlvo),
src/lib/metabolismo.ts:214:    maximo: Math.round(caloriasAlvo * 1.10)
src/lib/metabolismo.ts:225:  const ajusteBiotipoKcal = ajusteBio.kcal;
src/lib/metabolismo.ts:232:  caloriasAlvo = caloriasAlvo + (ajusteBiotipoKcal || 0);
src/lib/metabolismo.ts:234:    minimo: Math.round(caloriasAlvo * 0.90),
src/lib/metabolismo.ts:235:    ideal: Math.round(caloriasAlvo),
src/lib/metabolismo.ts:236:    maximo: Math.round(caloriasAlvo * 1.10)
src/lib/metabolismo.ts:256:    caloriasAlvo: Math.round(caloriasAlvo),
src/pages/DashboardPremium.tsx:48:  const kcal = adapted?.kcalTarget ?? activePlan?.nutrition?.kcalTarget ?? activePlan?.nutrition?.kcal ?? null;
src/pages/DashboardPremium.tsx:186:                  <div className="text-xs text-white/60">Calorias alvo</div>
src/pages/DashboardPremium.tsx:187:                  <div className="mt-1 text-xl font-semibold">{kcal ? `${kcal} kcal/dia` : "—"}</div>
src/components/steps/Step4Nutricao.tsx:20: * SSOT de kcal do Step4:
src/components/steps/Step4Nutricao.tsx:109:const [estrategia, setEstrategia] = useState<'deficit-leve' | 'deficit-moderado' | 'deficit-agressivo' | 'manutencao' | 'superavit'>('manutencao')
src/components/steps/Step4Nutricao.tsx:114:    case "deficit-leve":
src/components/steps/Step4Nutricao.tsx:116:    case "deficit-moderado":
src/components/steps/Step4Nutricao.tsx:118:    case "deficit-agressivo":
src/components/steps/Step4Nutricao.tsx:120:    case "superavit":
src/components/steps/Step4Nutricao.tsx:168:    const calorias = state.metabolismo?.caloriasAlvo || 2000
src/components/steps/Step4Nutricao.tsx:182:    // MF_BLOCO4_GUARDRAILS_V2: consistência kcal ↔ macros (ajusta carboidratos mantendo proteína/gordura)
src/components/steps/Step4Nutricao.tsx:183:    const kcalFixas = (proteina * 4) + (gorduras * 9);
src/components/steps/Step4Nutricao.tsx:184:    const kcalTarget = Math.round(caloriasFinais);
src/components/steps/Step4Nutricao.tsx:185:    const kcalRest = Math.max(0, kcalTarget - kcalFixas);
src/components/steps/Step4Nutricao.tsx:186:    const carboFix = Math.max(0, Math.round(kcalRest / 4));
src/components/steps/Step4Nutricao.tsx:189:    // recalcula kcal final para exibição coerente (diferenças por arredondamento)
src/components/steps/Step4Nutricao.tsx:190:    const kcalFinal = mfKcalFromMacros(proteina, carboidratos, gorduras);
src/components/steps/Step4Nutricao.tsx:191:    caloriasFinais = mfClampSSOT(Math.round(kcalFinal), 800, 6500);
src/components/steps/Step4Nutricao.tsx:374:      kcalAlvo: __mfKcalAlvo,
src/components/steps/Step4Nutricao.tsx:437:        <h2 className="text-2xl sm:text-3xl font-bold mb-2">Plano alimentar</h2>
src/components/steps/Step4Nutricao.tsx:444:          <CardTitle className="text-lg sm:text-xl">Calorias alvo</CardTitle>
src/components/steps/Step4Nutricao.tsx:449:            <p className="text-sm sm:text-base text-muted-foreground mt-2">calorias por dia</p>
src/components/steps/Step4Nutricao.tsx:453:              <div className="text-[11px] uppercase tracking-wider text-gray-400">Ajuste inteligente</div>
src/components/steps/Step4Nutricao.tsx:470:                  <div className="text-sm text-white/90">revise passos, NEAT e consistência. Depois ajuste o déficit/superávit.</div>
src/components/steps/Step4Nutricao.tsx:479:      {/* Estratégia */}
src/components/steps/Step4Nutricao.tsx:482:          <CardTitle className="text-lg sm:text-xl">Estratégia</CardTitle>
src/components/steps/Step4Nutricao.tsx:486:          <Label className="text-sm sm:text-base">Escolha a abordagem</Label>
src/components/steps/Step4Nutricao.tsx:492:              <SelectItem value="deficit-agressivo">Déficit Agressivo (-25%)</SelectItem>
src/components/steps/Step4Nutricao.tsx:493:              <SelectItem value="deficit-moderado">Déficit Moderado (-20%)</SelectItem>
src/components/steps/Step4Nutricao.tsx:494:              <SelectItem value="deficit-leve">Déficit Leve (-10%)</SelectItem>
src/components/steps/Step4Nutricao.tsx:495:              <SelectItem value="manutencao">Manutenção (0%)</SelectItem>
src/components/steps/Step4Nutricao.tsx:496:              <SelectItem value="superavit">Superávit (+15%)</SelectItem>
src/components/steps/Step4Nutricao.tsx:581:              <p className="text-xl sm:text-2xl font-bold text-white">~{Math.round(((state.metabolismo?.caloriasAlvo || 2000) - ((state.avaliacao?.peso || 70) * 2 * 4 + (state.avaliacao?.peso || 70) * 1 * 9)) / 4)}g</p>
src/services/plan/activePlanNutrition.writer.ts:39:      kcalTarget: plan.macros.kcal,
src/services/plan/activePlanNutrition.writer.ts:41:        kcal: plan.macros.kcal,
src/services/plan/activePlanNutrition.writer.ts:50:        ree_kcal: plan.ree_kcal,
src/services/plan/activePlanNutrition.writer.ts:51:        tdee_kcal: plan.tdee_kcal,
src/services/plan/activePlanNutrition.writer.ts:54:        delta_objetivo_kcal: plan.delta_objetivo_kcal,
src/components/steps/Step8Relatorio.tsx:115:              <p className="text-xl font-bold text-[#1E6BFF]">{state.metabolismo?.tmb} kcal</p>
src/components/steps/Step8Relatorio.tsx:119:              <p className="text-xl font-bold text-[#1E6BFF]">{state.metabolismo?.get} kcal</p>
src/components/steps/Step8Relatorio.tsx:123:              <p className="text-xl font-bold text-green-600">{state.metabolismo?.caloriasAlvo} kcal</p>
src/components/steps/Step8Relatorio.tsx:134:          <CardDescription>Estratégia: {state.nutricao?.estrategia} (ajuste sustentável)</CardDescription>
src/components/steps/Step8Relatorio.tsx:178:                        • {alimento.nome} ({alimento.gramas}g) - {alimento.calorias} kcal
src/components/steps/Step8Relatorio.tsx:183:                    <p className="text-xs font-medium">Total: {totalCalorias} kcal</p>
src/components/steps/Step3Metabolismo.tsx:213:              <span className="font-semibold text-white">Impacto (Δ GET − TMB)</span>: {__delta} kcal/dia
src/components/steps/Step3Metabolismo.tsx:333:              <Badge className="bg-white/10 text-white border-white/10">Estratégia</Badge>
src/components/steps/Step3Metabolismo.tsx:443:              <span className="text-lg font-normal text-muted-foreground ml-1">kcal</span>
src/components/steps/Step3Metabolismo.tsx:456:              <span className="text-lg font-normal text-muted-foreground ml-1">kcal</span>
src/components/steps/Step3Metabolismo.tsx:468:              {resultado.caloriasAlvo}
src/components/steps/Step3Metabolismo.tsx:469:              <span className="text-lg font-normal text-muted-foreground ml-1">kcal</span>
src/components/steps/Step3Metabolismo.tsx:491:              <Badge variant="outline" className="text-base">{(resultado.faixaSegura?.minimo ?? 0)} kcal</Badge>
src/components/steps/Step3Metabolismo.tsx:495:              <Badge className="bg-green-600 text-base">{ resultado.faixaSegura?.ideal ?? '-' } kcal</Badge>
src/components/steps/Step3Metabolismo.tsx:499:              <Badge variant="outline" className="text-base">{(resultado.faixaSegura?.maximo ?? 0)} kcal</Badge>
src/components/steps/Step3Metabolismo.tsx:545:                    Ajuste biotipo: <b className="text-green-200">+{String((resultado as any).ajusteBiotipoKcal)}</b> kcal
src/components/steps/Step3Metabolismo.tsx:549:                    Ajuste biotipo: <b className="text-white">0</b> kcal
src/components/steps/Step3Metabolismo.tsx:588:                  <span className="font-bold text-lg">{value} kcal</span>
src/components/steps/Step3Metabolismo.tsx:594:            Variação de {Math.min(...Object.values(resultado.comparativo))} a {Math.max(...Object.values(resultado.comparativo))} kcal entre os métodos
src/engine/nutrition/NutritionEngine.ts:21: * kcal: P=4, C=4, F=9
src/engine/nutrition/NutritionEngine.ts:35:  const kcalPF = (proteinG * 4) + (fatG * 9);
src/engine/nutrition/NutritionEngine.ts:36:  const carbsKcal = Math.max(0, targetKcal - kcalPF);
src/engine/nutrition/NutritionEngine.ts:46:export type Meal = { name: string; kcal: number; proteinG: number; carbsG: number; fatG: number; };
src/engine/nutrition/NutritionEngine.ts:54:    const kcal = targetKcal * pct;
src/engine/nutrition/NutritionEngine.ts:57:      kcal: Math.round(kcal),
src/engine/nutrition/NutritionEngine.ts:133:/** Phase 3C — check científico simples (coerência kcal do plano vs soma das refeições) */
src/engine/nutrition/NutritionEngine.ts:135:  kcalTarget?: number;
src/engine/nutrition/NutritionEngine.ts:141:  const target = Number(params.kcalTarget);
src/engine/nutrition/NutritionEngine.ts:150:    ? `${signal}: soma do dia ≈ alvo (${totals.calorias} vs ${Math.round(target)} kcal, Δ ${Math.round(delta)} kcal)`
src/engine/nutrition/NutritionEngine.ts:151:    : `${signal}: soma do dia difere do alvo (${totals.calorias} vs ${Math.round(target)} kcal, Δ ${Math.round(delta)} kcal | ${pct.toFixed(1)}%)`;
src/engine/nutrition/NutritionEngine.ts:174:    const kcal = r.alimentos.reduce((a, x) => a + Number(x.calorias || 0), 0);
src/engine/nutrition/NutritionEngine.ts:175:    return acc + kcal;
src/engine/nutrition/NutritionEngine.ts:193:  const kcalTarget = macrosTarget.calorias;
src/engine/nutrition/NutritionEngine.ts:197:  const science = validateDietScience({ kcalTarget, refeicoes, tolerancePct: params.tolerancePct ?? 10 });
src/engine/nutrition/NutritionEngine.ts:203:    `Calorias (refeições): ${totals.calorias} kcal`,
src/engine/nutrition/NutritionEngine.ts:208:    kcalTarget != null ? `Meta calórica: ${kcalTarget} kcal` : "Meta calórica: indisponível",
src/engine/nutrition/NutritionEngine.ts:234:        `  Totais: ${refeicaoTotals.calorias} kcal | P ${refeicaoTotals.proteinas.toFixed(1)}g | C ${refeicaoTotals.carboidratos.toFixed(1)}g | G ${refeicaoTotals.gorduras.toFixed(1)}g`
src/engine/nutrition/NutritionEngine.ts:241:      const kcal = a?.calorias != null ? `${a.calorias} kcal` : "";
src/engine/nutrition/NutritionEngine.ts:245:      const parts = [g, kcal, p, c, f].filter(Boolean).join(" | ");
src/engine/nutrition/NutritionEngine.ts:294:  lines.push(`Meta (kcal): ${nutricao?.macros?.calorias ?? "—"}`);
src/components/steps/Step5Treino.tsx:273:    const getKcal = Number((state as any)?.metabolismo?.get ?? (state as any)?.metabolismo?.caloriasAlvo ?? 0);
src/components/steps/Step5Treino.tsx:295:        caloriasAlvo: energy.caloriasAlvoFinal,
src/components/steps/Step5Treino.tsx:296:        caloriasAlvoFinal: energy.caloriasAlvoFinal,
src/engine/ssot/selectors.ts:20:  if (s.includes("cut") || s.includes("deficit") || s.includes("déficit")) return "cut";
src/engine/ssot/selectors.ts:21:  if (s.includes("bulk") || s.includes("superavit") || s.includes("superávit") || s.includes("hipertrof")) return "bulk";
src/features/fitness-suite/engine/goalEnergy.ts:6:// - Emagrecimento: déficit moderado (evitar agressivo quando carga alta).
src/features/fitness-suite/engine/goalEnergy.ts:7:// - Hipertrofia: leve superávit.
src/features/fitness-suite/engine/goalEnergy.ts:8:// - Performance/Longevidade: manutenção/leve superávit conforme carga.
src/features/fitness-suite/engine/goalEnergy.ts:16:// Estima kcal/semana do treino a partir de modalidades + nível.
src/features/fitness-suite/engine/goalEnergy.ts:24:  // valores conservadores (kcal/sessão) para MVP (sem risco de superestimar)
src/features/fitness-suite/engine/goalEnergy.ts:39:  // carga semanal de treino em kcal:
src/features/fitness-suite/engine/goalEnergy.ts:40:  // usamos para evitar déficit agressivo quando treino alto (aderência + recuperação).
src/features/fitness-suite/engine/goalEnergy.ts:44:    // leve superávit: +5% a +12% do GET, limitado por carga.
src/features/fitness-suite/engine/goalEnergy.ts:50:    // manutenção/leve superávit: 0% a +6% do GET conforme carga.
src/features/fitness-suite/engine/goalEnergy.ts:56:  // déficit moderado: -10% a -20% do GET, MAS se treino alto, reduzir déficit para preservar performance.
src/features/fitness-suite/engine/goalEnergy.ts:90:    caloriasAlvoFinal: alvoFinal,
src/components/planos/DietaAtivaView.tsx:21:  let kcal = 0, p = 0, c = 0, g = 0;
src/components/planos/DietaAtivaView.tsx:23:    kcal += mfNum(a?.calorias, 0);
src/components/planos/DietaAtivaView.tsx:28:  return { kcal, p, c, g };
src/components/planos/DietaAtivaView.tsx:31:  let kcal = 0, p = 0, c = 0, g = 0;
src/components/planos/DietaAtivaView.tsx:32:  for (const r of refeicoes){ const m = mfSumMeal(r); kcal += m.kcal; p += m.p; c += m.c; g += m.g; }
src/components/planos/DietaAtivaView.tsx:33:  return { kcal, p, c, g };
src/components/planos/DietaAtivaView.tsx:35:const MF_EQ: Record<string, { label: string; kcal100: number; unit: string; note?: string }[]> = {
src/components/planos/DietaAtivaView.tsx:37:    { label: "Peito de frango", kcal100: 165, unit: "g" },
src/components/planos/DietaAtivaView.tsx:38:    { label: "Patinho moído", kcal100: 170, unit: "g" },
src/components/planos/DietaAtivaView.tsx:39:    { label: "Ovos (inteiro)", kcal100: 143, unit: "g", note: "≈ 2 ovos = 100g" },
src/components/planos/DietaAtivaView.tsx:40:    { label: "Atum em água", kcal100: 116, unit: "g" },
src/components/planos/DietaAtivaView.tsx:41:    { label: "Iogurte grego zero", kcal100: 60, unit: "g" },
src/components/planos/DietaAtivaView.tsx:44:    { label: "Arroz branco cozido", kcal100: 130, unit: "g" },
src/components/planos/DietaAtivaView.tsx:45:    { label: "Batata inglesa cozida", kcal100: 87, unit: "g" },
src/components/planos/DietaAtivaView.tsx:46:    { label: "Aveia", kcal100: 389, unit: "g" },
src/components/planos/DietaAtivaView.tsx:47:    { label: "Pão integral", kcal100: 250, unit: "g" },
src/components/planos/DietaAtivaView.tsx:48:    { label: "Banana", kcal100: 89, unit: "g" },
src/components/planos/DietaAtivaView.tsx:51:    { label: "Azeite de oliva", kcal100: 884, unit: "g", note: "≈ 1 colher sopa = 10g" },
src/components/planos/DietaAtivaView.tsx:52:    { label: "Pasta de amendoim", kcal100: 588, unit: "g" },
src/components/planos/DietaAtivaView.tsx:53:    { label: "Castanhas", kcal100: 600, unit: "g" },
src/components/planos/DietaAtivaView.tsx:54:    { label: "Abacate", kcal100: 160, unit: "g" },
src/components/planos/DietaAtivaView.tsx:57:    { label: "Brócolis", kcal100: 34, unit: "g" },
src/components/planos/DietaAtivaView.tsx:58:    { label: "Salada (folhas)", kcal100: 15, unit: "g" },
src/components/planos/DietaAtivaView.tsx:59:    { label: "Cenoura", kcal100: 41, unit: "g" },
src/components/planos/DietaAtivaView.tsx:70:function mfEqPortion(kcalTarget: number, kcal100: number) {
src/components/planos/DietaAtivaView.tsx:71:  if (!Number.isFinite(kcalTarget) || kcalTarget <= 0) return 0;
src/components/planos/DietaAtivaView.tsx:72:  if (!Number.isFinite(kcal100) || kcal100 <= 0) return 0;
src/components/planos/DietaAtivaView.tsx:73:  return (kcalTarget / kcal100) * 100;
src/components/planos/DietaAtivaView.tsx:90:  const alvoKcal = mfNum((dietaAtiva as any)?.nutricao?.caloriasAlvo ?? (dietaAtiva as any)?.nutricao?.kcalAlvo ?? (dietaAtiva as any)?.caloriasAlvo, 0);
src/components/planos/DietaAtivaView.tsx:95:  const [eqOpen, setEqOpen] = useState<{ foodName: string; kcal: number } | null>(null);
src/components/planos/DietaAtivaView.tsx:118:              <div className="text-xl font-semibold text-white">{mfRound(day.kcal)} <span className="text-sm text-gray-400">kcal</span></div>
src/components/planos/DietaAtivaView.tsx:119:              {alvoKcal > 0 && <div className="text-xs text-gray-400 mt-1">Alvo: <span className="text-white/90">{mfRound(alvoKcal)} kcal</span></div>}
src/components/planos/DietaAtivaView.tsx:129:                {alvoKcal > 0 ? <span>Diferença: <span className="font-semibold">{mfRound(day.kcal - alvoKcal)} kcal</span></span> : <span className="text-gray-400">Alvo não definido no plano.</span>}
src/components/planos/DietaAtivaView.tsx:131:              <div className="text-[11px] text-gray-500 mt-2">Substituições são aproximações (kcal). Macros podem variar conforme o alimento.</div>
src/components/planos/DietaAtivaView.tsx:154:                            <div className="text-xs text-gray-400 mt-1">{mfRound(m.kcal)} kcal · P {mfRound(m.p)}g · C {mfRound(m.c)}g · G {mfRound(m.g)}g</div>
src/components/planos/DietaAtivaView.tsx:166:                              const kcal = mfNum(a?.calorias, 0);
src/components/planos/DietaAtivaView.tsx:174:                                      {qty ? <span>{String(qty)} {unit ? String(unit) : ""} · </span> : null}{mfRound(kcal)} kcal
src/components/planos/DietaAtivaView.tsx:177:                                  <Button variant="outline" className="h-9 px-3 border-white/15 bg-black/40 shrink-0" onClick={() => setEqOpen({ foodName: String(name), kcal })} disabled={!(kcal > 0)}>
src/components/planos/DietaAtivaView.tsx:197:                  <div className="text-sm font-semibold text-white">Equivalências por kcal</div>
src/components/planos/DietaAtivaView.tsx:198:                  <div className="text-xs text-gray-400 mt-1">Base: <span className="text-white/90">{eqOpen.foodName}</span> · <span className="text-white/90">{mfRound(eqOpen.kcal)} kcal</span></div>
src/components/planos/DietaAtivaView.tsx:208:                      const portion = mfEqPortion(eqOpen.kcal, o.kcal100);
src/components/planos/DietaAtivaView.tsx:212:                          <div className="text-xs text-gray-400 mt-1">Porção equivalente: <span className="text-white/90">{mfRound(portion)} {o.unit}</span> · ref {o.kcal100} kcal/100{o.unit}</div>
src/components/charts/StatsOverview.tsx:15:    { icon: Flame, label: "Calorias Queimadas", value: `${totalCalories.toLocaleString()} kcal`, color: "text-orange-400", bgColor: "bg-orange-500/10" },
src/components/planos/TreinoAtivoView.tsx:81:              Estratégia: <span className="text-white/80">{view.estrategia}</span>
src/features/fitness-suite/engine/strength/strengthStrategies.ts:81: * Estratégias:
src/features/fitness-suite/engine/weeklyProtocol.ts:116:  // Estratégias determinísticas (base conceitual: periodização, progressão, distribuição de estímulos, controle de intensidade)
src/features/fitness-suite/engine/weeklyProtocol.ts:193:    strategy: "Estratégia estruturada",
src/features/fitness-suite/engine/weeklyProtocol.ts:194:    rationale: "Estratégia definida de forma determinística com base em nível, objetivo e dias disponíveis.",
src/features/fitness-suite/engine/metabolismoActivity.ts:73:  caloriasAlvo?: number;
src/features/fitness-suite/engine/metabolismoActivity.ts:79:  // caloriasAlvo: se vier do seu modelo/objetivo, respeita; caso contrário, usa GET como base
src/features/fitness-suite/engine/metabolismoActivity.ts:80:  const caloriasAlvo = Number.isFinite(input.caloriasAlvo as number)
src/features/fitness-suite/engine/metabolismoActivity.ts:81:    ? Math.round(Number(input.caloriasAlvo))
src/features/fitness-suite/engine/metabolismoActivity.ts:94:    caloriasAlvo,
